# AI对话功能启动说明

## 问题解决
已创建代理服务器解决CORS跨域问题。

## 启动步骤

### 1. 安装依赖（如果还没有）
```bash
npm install cors
```

### 2. 启动代理服务器（新开一个终端窗口）
```bash
npm run server
```

**成功启动后会显示：**
```
代理服务器运行在 http://localhost:3001
API密钥已加载: 是
```

### 3. 启动React开发服务器（另一个终端窗口）
```bash
npm start
```

## 运行方式

**需要同时运行两个服务：**

1. **终端1** - 代理服务器（端口3001）
   ```bash
   npm run server
   ```

2. **终端2** - React前端（端口3000）
   ```bash
   npm start
   ```

## 验证

1. 打开浏览器访问 http://localhost:3000
2. 点击右侧AI对话窗口
3. 输入问题测试，如："北京的房价是多少？"

## 常见问题

### Q: 提示"无法连接到代理服务器"
A: 确保代理服务器已启动（`npm run server`），并且运行在 http://localhost:3001

### Q: 代理服务器启动失败
A: 
- 检查端口3001是否被占用
- 确认已安装cors：`npm install cors`
- 检查.env文件是否存在且配置正确

### Q: API密钥错误
A: 
- 检查.env文件中的REACT_APP_AI_API_KEY是否正确
- 确认通义千问密钥格式（通常不是sk-开头）
- 重启代理服务器使配置生效

## 停止服务

- 按 `Ctrl+C` 停止对应的服务

## 注意事项

- 代理服务器和React服务器需要**同时运行**
- 修改.env文件后需要**重启代理服务器**
- 代理服务器运行在3001端口，React运行在3000端口
